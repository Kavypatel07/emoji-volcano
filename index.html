<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ultimate Emoji Control Center</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>
    <style>
        body {
            margin: 0;
            height: 100vh;
            background-color: #0d0d0d;
            background-image: radial-gradient(circle at 50% 50%, #2a2a2a 0%, #000000 100%);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            justify-content: center; /* Vertically Centered */
            align-items: center;     /* Horizontally Centered */
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        }

        /* --- THE GRID LAYOUT --- */
        .control-panel {
            display: grid;
            grid-template-columns: repeat(5, 1fr); /* 5 Columns */
            gap: 20px;
            z-index: 100;
            padding: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 40px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.05);
            transition: all 0.5s ease;
        }

        /* --- APPLE-STYLE GLASS BUTTON --- */
        .glass-btn {
            position: relative;
            width: 90px;
            height: 90px;
            border-radius: 24px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.2);
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            user-select: none;
        }

        .glass-btn:hover {
            transform: translateY(-8px) scale(1.05);
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4), 0 0 20px rgba(255,255,255,0.1);
            border-color: rgba(255, 255, 255, 0.5);
        }

        .glass-btn:active { transform: scale(0.9); }

        .glass-btn img {
            width: 50px;
            height: 50px;
            pointer-events: none;
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.3));
        }

        /* --- ANIMATION STATES --- */
        /* Hidden state for other buttons during Volcano */
        .glass-btn.vanish {
            opacity: 0;
            transform: scale(0.01);
            pointer-events: none;
        }

        /* Hero state for the active button */
        .glass-btn.hero {
            transform: scale(1.8);
            z-index: 200;
            background: rgba(255, 215, 0, 0.15); /* Gold Glow */
            border-color: #ffd700;
            box-shadow: 0 0 60px rgba(255, 215, 0, 0.5);
        }

        /* --- COMBO DISPLAY --- */
        .combo-container {
            position: absolute;
            top: 10%; /* Above the grid */
            text-align: center;
            pointer-events: none;
            z-index: 50;
        }

        .combo-counter {
            font-size: 72px;
            font-weight: 900;
            background: linear-gradient(to bottom, #ffffff, #888888);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            opacity: 0;
            transition: opacity 0.2s;
            filter: drop-shadow(0 0 20px rgba(255,255,255,0.4));
        }
        
        .combo-label {
            color: rgba(255,255,255,0.5);
            font-size: 16px;
            letter-spacing: 6px;
            text-transform: uppercase;
            opacity: 0;
            margin-top: -10px;
        }

        /* Streak Progress Bar */
        .streak-track {
            position: absolute;
            bottom: 40px;
            width: 400px;
            height: 8px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            overflow: hidden;
            opacity: 0;
            transition: opacity 0.5s;
        }
        
        .streak-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #00C9FF 0%, #92FE9D 100%);
            box-shadow: 0 0 20px #92FE9D;
            transition: width 0.1s linear;
        }

        canvas { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none; }
    </style>
</head>
<body>

    <div class="combo-container">
        <div id="combo-display" class="combo-counter">10x</div>
        <div id="combo-label" class="combo-label">COMBO</div>
    </div>

    <div class="control-panel" id="panel">
        
        <div class="glass-btn" onclick="handleClick(this, 'https://cdn.jsdelivr.net/gh/Tarikul-Islam-Anik/Animated-Fluent-Emojis@master/Emojis/Smilies/Red%20Heart.png')">
            <img src="https://cdn.jsdelivr.net/gh/Tarikul-Islam-Anik/Animated-Fluent-Emojis@master/Emojis/Smilies/Red%20Heart.png" alt="Love">
        </div>
        
        <div class="glass-btn" onclick="handleClick(this, 'https://cdn.jsdelivr.net/gh/Tarikul-Islam-Anik/Animated-Fluent-Emojis@master/Emojis/Travel%20and%20places/Fire.png')">
            <img src="https://cdn.jsdelivr.net/gh/Tarikul-Islam-Anik/Animated-Fluent-Emojis@master/Emojis/Travel%20and%20places/Fire.png" alt="Fire">
        </div>
        
        <div class="glass-btn" onclick="handleClick(this, 'https://cdn.jsdelivr.net/gh/Tarikul-Islam-Anik/Animated-Fluent-Emojis@master/Emojis/Objects/Money%20Bag.png')">
            <img src="https://cdn.jsdelivr.net/gh/Tarikul-Islam-Anik/Animated-Fluent-Emojis@master/Emojis/Objects/Money%20Bag.png" alt="Money">
        </div>

        <div class="glass-btn" onclick="handleClick(this, 'https://cdn.jsdelivr.net/gh/Tarikul-Islam-Anik/Animated-Fluent-Emojis@master/Emojis/Smilies/Smiling%20Face%20with%20Sunglasses.png')">
            <img src="https://cdn.jsdelivr.net/gh/Tarikul-Islam-Anik/Animated-Fluent-Emojis@master/Emojis/Smilies/Smiling%20Face%20with%20Sunglasses.png" alt="Cool">
        </div>

        <div class="glass-btn" onclick="handleClick(this, 'https://cdn.jsdelivr.net/gh/Tarikul-Islam-Anik/Animated-Fluent-Emojis@master/Emojis/Travel%20and%20places/Rocket.png')">
            <img src="https://cdn.jsdelivr.net/gh/Tarikul-Islam-Anik/Animated-Fluent-Emojis@master/Emojis/Travel%20and%20places/Rocket.png" alt="Rocket">
        </div>

        <div class="glass-btn" onclick="handleClick(this, 'https://cdn.jsdelivr.net/gh/Tarikul-Islam-Anik/Animated-Fluent-Emojis@master/Emojis/Smilies/Pile%20of%20Poo.png')">
            <img src="https://cdn.jsdelivr.net/gh/Tarikul-Islam-Anik/Animated-Fluent-Emojis@master/Emojis/Smilies/Pile%20of%20Poo.png" alt="Poo">
        </div>

        <div class="glass-btn" onclick="handleClick(this, 'https://cdn.jsdelivr.net/gh/Tarikul-Islam-Anik/Animated-Fluent-Emojis@master/Emojis/Smilies/Ghost.png')">
            <img src="https://cdn.jsdelivr.net/gh/Tarikul-Islam-Anik/Animated-Fluent-Emojis@master/Emojis/Smilies/Ghost.png" alt="Ghost">
        </div>

        <div class="glass-btn" onclick="handleClick(this, 'https://cdn.jsdelivr.net/gh/Tarikul-Islam-Anik/Animated-Fluent-Emojis@master/Emojis/Smilies/Alien%20Monster.png')">
            <img src="https://cdn.jsdelivr.net/gh/Tarikul-Islam-Anik/Animated-Fluent-Emojis@master/Emojis/Smilies/Alien%20Monster.png" alt="Alien">
        </div>

        <div class="glass-btn" onclick="handleClick(this, 'https://cdn.jsdelivr.net/gh/Tarikul-Islam-Anik/Animated-Fluent-Emojis@master/Emojis/Smilies/Robot.png')">
            <img src="https://cdn.jsdelivr.net/gh/Tarikul-Islam-Anik/Animated-Fluent-Emojis@master/Emojis/Smilies/Robot.png" alt="Robot">
        </div>

        <div class="glass-btn" onclick="handleClick(this, 'https://cdn.jsdelivr.net/gh/Tarikul-Islam-Anik/Animated-Fluent-Emojis@master/Emojis/Smilies/Clown%20Face.png')">
            <img src="https://cdn.jsdelivr.net/gh/Tarikul-Islam-Anik/Animated-Fluent-Emojis@master/Emojis/Smilies/Clown%20Face.png" alt="Clown">
        </div>

    </div>

    <div id="streak-bar" class="streak-track">
        <div id="streak-fill" class="streak-fill"></div>
    </div>

    <script>
        // --- PHYSICS ENGINE SETUP ---
        const Engine = Matter.Engine, Render = Matter.Render, Runner = Matter.Runner, 
              Bodies = Matter.Bodies, Composite = Matter.Composite, World = Matter.World, Body = Matter.Body;

        const engine = Engine.create();
        const world = engine.world;
        const render = Render.create({
            element: document.body,
            engine: engine,
            options: { 
                width: window.innerWidth, 
                height: window.innerHeight, 
                background: 'transparent', 
                wireframes: false 
            }
        });

        // Create Invisible Walls (Ground, Left, Right)
        const ground = Bodies.rectangle(window.innerWidth/2, window.innerHeight+60, window.innerWidth, 120, { isStatic: true, render: {visible: false} });
        const leftWall = Bodies.rectangle(-60, window.innerHeight/2, 120, window.innerHeight, { isStatic: true, render: {visible: false} });
        const rightWall = Bodies.rectangle(window.innerWidth+60, window.innerHeight/2, 120, window.innerHeight, { isStatic: true, render: {visible: false} });
        Composite.add(world, [ground, leftWall, rightWall]);

        Render.run(render);
        const runner = Runner.create();
        Runner.run(runner, engine);

        // Resize Logic
        window.addEventListener('resize', () => {
            render.canvas.width = window.innerWidth;
            render.canvas.height = window.innerHeight;
            Body.setPosition(ground, { x: window.innerWidth/2, y: window.innerHeight+60 });
            Body.setPosition(rightWall, { x: window.innerWidth+60, y: window.innerHeight/2 });
        });

        // --- GAMEPLAY LOGIC ---
        let currentStreak = 0;
        let lastEmoji = "";
        let streakTimeout;
        let isVolcanoActive = false;

        function handleClick(btnElement, emojiUrl) {
            // Prevent clicking during a volcano eruption
            if (isVolcanoActive) return;

            // 1. Streak Logic
            if (emojiUrl === lastEmoji) {
                currentStreak++;
            } else {
                currentStreak = 1; 
                lastEmoji = emojiUrl;
            }

            // 2. Visual Updates
            updateStats(currentStreak);

            // 3. Trigger Action
            if (currentStreak >= 10) {
                startVolcano(btnElement, emojiUrl);
                currentStreak = 0; // Reset streak
            } else {
                startRain(emojiUrl);
            }

            // 4. Inactivity Timer (Reset streak after 2 seconds)
            clearTimeout(streakTimeout);
            streakTimeout = setTimeout(() => {
                if(!isVolcanoActive) {
                    currentStreak = 0;
                    updateStats(0);
                }
            }, 2000);
        }

        function startRain(url) {
            const drops = 3; 
            for (let i = 0; i < drops; i++) {
                // Random position across width
                const xPos = Math.random() * window.innerWidth;
                const scale = Math.random() * 0.4 + 0.3; // Standard Size
                createEmojiBody(xPos, -50, scale, url, false);
            }
        }

        function startVolcano(heroBtn, url) {
            isVolcanoActive = true;
            
            // UI EFFECTS
            const allBtns = document.querySelectorAll('.glass-btn');
            const panel = document.getElementById('panel');
            const comboText = document.getElementById('combo-display');
            const comboLabel = document.getElementById('combo-label');

            // Hide the panel border slightly
            panel.style.background = "transparent";
            panel.style.border = "none";
            panel.style.backdropFilter = "none";

            // Fade out others, Highlight Hero
            allBtns.forEach(btn => {
                if(btn === heroBtn) {
                    btn.classList.add('hero');
                } else {
                    btn.classList.add('vanish');
                }
            });

            // Update Text
            comboText.innerText = "VOLCANO!";
            comboText.style.color = "#FFD700";
            comboLabel.innerText = "BOSS MODE ACTIVATED";
            
            // PHYSICS ERUPTION
            let count = 0;
            const eruption = setInterval(() => {
                // Spawn from bottom center
                const xPos = window.innerWidth / 2 + (Math.random() * 100 - 50);
                const scale = Math.random() * 0.6 + 0.6; // Large emojis
                
                const body = createEmojiBody(xPos, window.innerHeight + 50, scale, url, true);
                
                // Blast Velocity
                Body.setVelocity(body, {
                    x: (Math.random() - 0.5) * 30, // Wide spread
                    y: -(Math.random() * 15 + 25)  // High upward force
                });

                count++;
                if(count > 60) clearInterval(eruption);
            }, 10);

            // RESET EVERYTHING AFTER 4 SECONDS
            setTimeout(() => {
                allBtns.forEach(btn => {
                    btn.classList.remove('vanish', 'hero');
                });
                
                // Restore panel style
                panel.style.background = "rgba(0, 0, 0, 0.3)";
                panel.style.border = "1px solid rgba(255,255,255,0.05)";
                panel.style.backdropFilter = "blur(10px)";

                comboText.innerText = "";
                comboLabel.innerText = "";
                updateStats(0);
                isVolcanoActive = false;
            }, 4000);
        }

        function createEmojiBody(x, y, scale, url, isVolcano) {
            const circle = Bodies.circle(x, y, 25 * scale, {
                restitution: 0.6, // Bounciness
                friction: 0.002,
                density: 0.04,
                render: {
                    sprite: {
                        texture: url,
                        xScale: scale * 0.4, 
                        yScale: scale * 0.4 
                    }
                }
            });
            
            Composite.add(world, circle);
            
            // Remove after some time to save memory
            // Volcano items last shorter because there are so many of them
            setTimeout(() => {
                World.remove(world, circle);
            }, isVolcano ? 5000 : 8000);
            
            return circle;
        }

        function updateStats(streak) {
            const counter = document.getElementById('combo-display');
            const label = document.getElementById('combo-label');
            const fill = document.getElementById('streak-fill');
            const bar = document.getElementById('streak-bar');

            if(streak > 0) {
                counter.innerText = streak + "x";
                counter.style.opacity = 1;
                label.style.opacity = 1;
                bar.style.opacity = 1;
            } else {
                counter.style.opacity = 0;
                label.style.opacity = 0;
                bar.style.opacity = 0;
            }

            // Fill bar logic (10 = 100%)
            const percent = Math.min((streak / 10) * 100, 100);
            fill.style.width = percent + "%";
            
            // Change color as you get closer to 10
            if(streak > 7) {
                fill.style.background = "linear-gradient(90deg, #ff9966 0%, #ff5e62 100%)";
                fill.style.boxShadow = "0 0 20px #ff5e62";
            } else {
                fill.style.background = "linear-gradient(90deg, #00C9FF 0%, #92FE9D 100%)";
                fill.style.boxShadow = "0 0 20px #92FE9D";
            }
        }
    </script>
</body>
</html>+